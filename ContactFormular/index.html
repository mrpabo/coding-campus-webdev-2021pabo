<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    

    <div id="card-output"></div>
    <button onclick="fetchCards()">klick</button>
    <script>
        /*
      const cardOutput = document.getElementById("card-output");
      async function fetchCards() {
        const res = await fetch("http://localhost:8081/getprofiles");
        const data = await res.json();
        return data.data;
        displayCards(data);
      }
      const value = fetchCards();
      function displayCards(value) {
        value.forEach((card) => {
          const cardContainer = document.createElement("div");
          cardContainer.innerHTML = `<div>${card.firstName} ${card.lastName}</div>
            <div>email: ${card.email}</div>
            <div>company: ${card.company}</div>`;
          cardOutput.appendChild(cardContainer);
        });
      }*/
const employeeCard = document.getElementById('card-output');
      function fetchCards() {
    fetch ("http://localhost:8081/getprofiles")
 .then(response => response.json())
 .then(data => displayCard(data));
}
function displayCard(datas){
datas["data"].forEach(card => {
    const cardContainer = document.createElement("div");
    cardContainer.className = "card-container";
    cardContainer.innerHTML=`
    <div> <b>Name:</b> ${card.firstName} ${card.lastName}</div>
    <div> <b>Email:</b> ${card.email}</div>
    <div> <b>Company:</b> ${card.company}</div>
    <div> <b>Profession:</b> ${card.profession}</div>
    <div> <b>Cars:</b> ${card.cars}</div>
    <div> <b>Greetings:</b> ${card.textGreeting}</div>
    <div> <b>Followers:</b> ${card.followers}</div>
    <div> ${card.firstName} ${card.lastName} is ${!card.isAvailableByPhone ? "<b>not</b>" : ""} <b>available</b> by phone.</div>
`;
    employeeCard.appendChild(cardContainer);
});
}


//Dans LÃ¶sung

     async function fetchCards() {
        // the fetch call return a response called res
        const res = await fetch("http://localhost:8081/getprofiles");
        // the res value is then formatted with re.json method. 
        //we then await for the output and save it in a destructured object.
        const { data } = await res.json();
        // check to see what the data value give? an array of cards!
        console.log(data);
        // take the data and loop over it. 
        data.forEach((card) => {
          // in every iteration build out a nice pretty html profile card. I hope your is prettier than mine.
        const cardContainer = document.createElement("div");
        cardContainer.innerHTML = `
        <div>${card.firstName} ${card.lastName}</div>
        <div>email: ${card.email}</div>
        <div>company: ${card.email}</div>
        <div>profession: ${card.profession}</div>

        `;
        // add the card to the body
        document.body.append(cardContainer);
      });
    }
      // dont forget to call the function!
      fetchCards()
    </script>
  </body>
</html>